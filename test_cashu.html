<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cashu test</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <div x-data="wallet">

    <h3>Mint Quote</h3>
    <input :disabled="!mintQuote.request" @click="$el.select()" x-model="mintQuote.request">
    <button :disabled="!mintQuote.request || invoiceCopied" @click="copyInvoice"
            x-text="invoiceCopied ? 'copied!' : 'copy invoice'"></button>
    <pre x-text="JSON.stringify(mintQuote, null, 2)"></pre>
    <input type="number" min="1" x-model="plannedTokenAmount">
    <button @click="updateQuote">update quote</button>

    <h3>Checked</h3>
    <pre x-text="JSON.stringify(checkedQuote, null, 2)"></pre>

    <h3>Proofs</h3>
    <label>
      Total amount:
      <input type="number" readonly x-model="totalAmount">
    </label>
    <pre x-text="JSON.stringify(proofs, null, 2)"></pre>
    <button @click="checkQuote">check mint quote</button>
    <button :disabled="!canMint" @click="mint">mint</button>



    <pre x-text="JSON.stringify(info, null, 2)"></pre>
    <button @click="updateInfo">update info</button>

    <div x-data="transaction">
      <div>
        <h3>Send</h3>
        <label>
          Total amount:<br>
          <input type="number" readonly x-model="totalAmount">
        </label>

        <br>

        <label>
          Send amount:<br>
          <input type="number" min="1" x-model="sendAmount">
        </label>

        <br>

        <label>
          Send Token:<br>
          <input :disabled="!sendToken" readonly @click="$el.select()" type="text" x-model="sendToken">
        </label>

        <br>

        <button @click="send">send</button>
      </div>

      <div>
        <h3>Receive</h3>
        <label>
          Receive Token:<br>
          <input type="text" x-model="receiveToken">
        </label>

        <br>

        <button @click="receive">receive</button>
      </div>
    </div>

  </div>

  <script type="module">
    import Alpine from 'https://cdn.jsdelivr.net/npm/alpinejs@3.14.1/dist/module.esm.js';
    import createWallet from './alpine/wallet.js';

    globalThis.addEventListener('alpine:init', () => {
      createWallet();
    });

    Alpine.start();
  </script>
</body>

</html>